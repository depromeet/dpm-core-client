# DPM Core í”„ë¡œì íŠ¸ êµ¬ì¡° ë° íŒ¨í‚¤ì§€ ì„¤ëª…ì„œ

## ğŸ“ í”„ë¡œì íŠ¸ ê°œìš”

DPM CoreëŠ” **Turborepo**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ **ëª¨ë…¸ë ˆí¬ Next.js í”„ë¡œì íŠ¸**ì…ë‹ˆë‹¤. ì—¬ëŸ¬ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í•˜ë‚˜ì˜ ì €ì¥ì†Œì—ì„œ ê´€ë¦¬í•˜ì—¬ ì½”ë“œ ì¬ì‚¬ìš©ì„±ê³¼ ê°œë°œ íš¨ìœ¨ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.

## ğŸ—ï¸ ì „ì²´ êµ¬ì¡°

```
dpm-core-client/
â”œâ”€â”€ apps/                     # ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤
â”‚   â”œâ”€â”€ admin/               # ê´€ë¦¬ì ì•±
â”‚   â””â”€â”€ client/              # í´ë¼ì´ì–¸íŠ¸ ì•±
â”œâ”€â”€ packages/                # ê³µìœ  íŒ¨í‚¤ì§€ë“¤
â”‚   â”œâ”€â”€ shared/              # ê³µí†µ ì»´í¬ë„ŒíŠ¸/ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ api/                 # API í†µì‹  ë¼ì´ë¸ŒëŸ¬ë¦¬
â”œâ”€â”€ package.json             # ë£¨íŠ¸ ì„¤ì •
â”œâ”€â”€ turbo.json               # Turborepo ì„¤ì •
â”œâ”€â”€ tsconfig.base.json       # ê³µí†µ TypeScript ì„¤ì •
â””â”€â”€ yarn.lock                # ì˜ì¡´ì„± ë½ íŒŒì¼
```

## ğŸ“¦ íŒ¨í‚¤ì§€ ìƒì„¸ ì„¤ëª…

### 1. ì• í”Œë¦¬ì¼€ì´ì…˜ (apps/)

#### ğŸ”§ `@dpm-core/admin` - ê´€ë¦¬ì ì•±
- **ìœ„ì¹˜**: `apps/admin/`
- **í¬íŠ¸**: `3001`
- **ëª©ì **: ê´€ë¦¬ììš© ëŒ€ì‹œë³´ë“œ ë° ê´€ë¦¬ ê¸°ëŠ¥
- **íŠ¹ì§•**: 
  - Next.js 15.3.3 ê¸°ë°˜
  - React 19 ì‚¬ìš©
  - ê´€ë¦¬ì ì „ìš© UI/UX
  - ì„¸ì…˜ ê´€ë¦¬ ë° ì‚¬ìš©ì ê´€ë¦¬

#### ğŸ‘¥ `@dpm-core/client` - í´ë¼ì´ì–¸íŠ¸ ì•±
- **ìœ„ì¹˜**: `apps/client/`
- **í¬íŠ¸**: `3000`
- **ëª©ì **: ì¼ë°˜ ì‚¬ìš©ììš© ì• í”Œë¦¬ì¼€ì´ì…˜
- **íŠ¹ì§•**:
  - Next.js 15.3.3 ê¸°ë°˜
  - React 19 ì‚¬ìš©
  - React Query ë°ì´í„° ê´€ë¦¬
  - ì‚¬ìš©ì ì¸ì¦ ë° ì„¸ì…˜ ê´€ë¦¬

### 2. ê³µìœ  íŒ¨í‚¤ì§€ (packages/)

#### ğŸ¨ `@dpm-core/shared` - ê³µí†µ ì»´í¬ë„ŒíŠ¸/ìœ í‹¸ë¦¬í‹°
- **ìœ„ì¹˜**: `packages/shared/`
- **ëª©ì **: ì•± ê°„ ê³µìœ ë˜ëŠ” ì»´í¬ë„ŒíŠ¸, ìœ í‹¸ë¦¬í‹°, íƒ€ì… ì •ì˜
- **ì£¼ìš” ë‚´ìš©**:
  - UI ì»´í¬ë„ŒíŠ¸ (Button, Avatar, Card, Drawer, Popover)
  - ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸
  - ì¸ì¦ í´ë¼ì´ì–¸íŠ¸/ì„œë²„ ìœ í‹¸ë¦¬í‹°
  - ê³µí†µ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
  - íƒ€ì… ì •ì˜
  - ìŠ¤íƒ€ì¼ ë³€í˜• ê´€ë¦¬

#### ğŸŒ `@dpm-core/api` - API í†µì‹  ë¼ì´ë¸ŒëŸ¬ë¦¬
- **ìœ„ì¹˜**: `packages/api/`
- **ëª©ì **: ì™¸ë¶€ API í†µì‹ ì„ ìœ„í•œ ê³µí†µ HTTP í´ë¼ì´ì–¸íŠ¸
- **ì£¼ìš” ë‚´ìš©**:
  - HTTP í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
  - ì¸ì¦ ê´€ë ¨ API
  - ê³µí†µ API ìœ í‹¸ë¦¬í‹°

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### ê³µí†µ ê¸°ìˆ 
- **ëª¨ë…¸ë ˆí¬**: Turborepo
- **íŒ¨í‚¤ì§€ ê´€ë¦¬**: Yarn Workspaces
- **TypeScript**: 5.x
- **ì½”ë“œ í¬ë§·íŒ…**: Biome
- **ì• ë‹ˆë©”ì´ì…˜**: Motion.js

### í”„ë¡ íŠ¸ì—”ë“œ (Next.js ì•±)
- **Next.js**: 15.3.3
- **React**: 19.0.0
- **Tailwind CSS**: 4.x
- **UI ì»´í¬ë„ŒíŠ¸**: Radix UI
- **ë°ì´í„° ê´€ë¦¬**: React Query (client ì•±)

### ë°±ì—”ë“œ/ì¸ì¦
- **ì¸ì¦**: Better Auth
- **HTTP í´ë¼ì´ì–¸íŠ¸**: Axios

## ğŸš€ ê°œë°œ í™˜ê²½ ì„¤ì •

### 1. ì´ˆê¸° ì„¤ì •
```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
yarn install

# ëª¨ë“  íŒ¨í‚¤ì§€ ë¹Œë“œ
yarn build

# ë¡œì»¬ ì¸ì¦ì„œ ë°œê¸‰
# hostsíŒŒì¼ ìˆ˜ì • í•„ìˆ˜ -> local.dpmcore.o-r.kr
. ./ssl.sh

# í”„ë¡ì‹œ ì„œë²„ ì‹¤í–‰
docker compose up -d

```

### 2. ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
# ëª¨ë“  ì•± ë™ì‹œ ì‹¤í–‰
yarn dev

# ê°œë³„ ì•± ì‹¤í–‰
yarn workspace @dpm-core/admin dev    # ê´€ë¦¬ì ì•± (í¬íŠ¸ 3001)
yarn workspace @dpm-core/client dev   # í´ë¼ì´ì–¸íŠ¸ ì•± (í¬íŠ¸ 3000)
```

### 3. ë¹Œë“œ ë° ë°°í¬
```bash
# ì „ì²´ ë¹Œë“œ
yarn build

# ê°œë³„ ë¹Œë“œ
yarn workspace @dpm-core/admin build
yarn workspace @dpm-core/client build
```

## ğŸ”„ ì¤‘ìš” ì„¤ì •

### 1. transpilePackages ì„¤ì •
Next.js ì•±ì—ì„œ `@dpm-core/shared` íŒ¨í‚¤ì§€ì˜ `'use client'` ë””ë ‰í‹°ë¸Œë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ `transpilePackages` ì„¤ì •ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

```typescript
// apps/admin/next.config.ts, apps/client/next.config.ts
const nextConfig: NextConfig = {
  transpilePackages: ['@dpm-core/shared'],
};
```

### 2. íŒ¨í‚¤ì§€ ì°¸ì¡° ë°©ì‹
- **shared íŒ¨í‚¤ì§€**: ì†ŒìŠ¤ ì½”ë“œ ì§ì ‘ ì°¸ì¡° (`src/index.ts`)
- **api íŒ¨í‚¤ì§€**: ë¹Œë“œëœ ê²°ê³¼ë¬¼ ì°¸ì¡° (`dist/index.js`)

### 3. ì˜ì¡´ì„± ê´€ë¦¬
```json
{
  "dependencies": {
    "@dpm-core/shared": "workspace:*",
    "@dpm-core/api": "workspace:*"
  }
}
```

## ğŸ“‹ ê°œë°œ ê·œì¹™

### 1. ì½”ë“œ ìŠ¤íƒ€ì¼
- **Biome**ë¥¼ ì‚¬ìš©í•œ ì¼ê´€ëœ ì½”ë“œ í¬ë§·íŒ…
- **TypeScript** ê°•ì œ ì‚¬ìš©
- **ì—„ê²©í•œ íƒ€ì… ê²€ì‚¬** ì ìš©

### 2. ì»´í¬ë„ŒíŠ¸ ê°œë°œ
- **'use client'** ë””ë ‰í‹°ë¸Œ ëª…ì‹œì  ì‚¬ìš©
- **Radix UI** ê¸°ë°˜ ì»´í¬ë„ŒíŠ¸ ê°œë°œ
- **Tailwind CSS** ì‚¬ìš©

### 3. ì¸ì¦ ì²˜ë¦¬
- **Better Auth** ì‚¬ìš©
- ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ë¶„ë¦¬ëœ ì¸ì¦ ë¡œì§
- ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œ

## ğŸ› ï¸ ë¬¸ì œ í•´ê²°

### 1. 'use client' ë””ë ‰í‹°ë¸Œ ë¬¸ì œ
- **í•´ê²°ë°©ë²•**: `transpilePackages` ì„¤ì • í™•ì¸
- **shared íŒ¨í‚¤ì§€**: `main: "src/index.ts"` ì„¤ì • í™•ì¸

### 2. ìˆœí™˜ ì°¸ì¡° ë¬¸ì œ
- **í•´ê²°ë°©ë²•**: ìƒëŒ€ ê²½ë¡œ import ì‚¬ìš©
- **ì˜ˆì‹œ**: `import { cn } from '../../utils/cn'`

### 3. ë¹Œë“œ ì˜¤ë¥˜
- **dist í´ë” ì¶©ëŒ**: `rm -rf packages/*/dist` í›„ ì¬ë¹Œë“œ
- **ì˜ì¡´ì„± ë¬¸ì œ**: `yarn install --force` ì‹¤í–‰

## ğŸ“„ ê´€ë ¨ íŒŒì¼ë“¤

- `package.json`: ë£¨íŠ¸ ì„¤ì • ë° ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì •ì˜
- `turbo.json`: Turborepo íƒœìŠ¤í¬ ì„¤ì •
- `tsconfig.base.json`: ê³µí†µ TypeScript ì„¤ì •
- `biome.json`: ì½”ë“œ í¬ë§·íŒ… ì„¤ì •
- `yarn.lock`: ì˜ì¡´ì„± ì ê¸ˆ íŒŒì¼ 